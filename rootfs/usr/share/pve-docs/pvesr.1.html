<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.9">
<title>pvesr(1)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article" style="max-width:55em">
<div id="header">
<h1>pvesr(1)</h1>
<span id="author">Proxmox Server Solutions Gmbh</span><br>
<span id="email" class="monospaced">&lt;<a href="mailto:support@proxmox.com">support@proxmox.com</a>&gt;</span><br>
<span id="revnumber">version 5.2,</span>
<span id="revdate">Wed Aug  8 08:51:56 CEST 2018</span>
</div>
<div id="content">
<div class="sect1">
<h2 id="chapter_pvesr">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>pvesr - Proxmox VE Storage Replication</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>pvesr</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span></p></div>
<div class="paragraph">
<p><strong>pvesr create-local-job</strong> <span class="monospaced">&lt;id&gt; &lt;target&gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Create a new replication job</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;target&gt;</span>: <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Target node.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Description.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&lt;boolean&gt;</span> 
</dt>
<dd>
<p>
Flag to disable/deactivate the entry.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rate</span> <span class="monospaced">&lt;number&gt; (1 - N)</span> 
</dt>
<dd>
<p>
Rate limit in mbps (megabytes per second) as floating point number.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&lt;full | local&gt;</span> 
</dt>
<dd>
<p>
Mark the replication job for removal. The job will remove all local replication snapshots. When set to <em>full</em>, it also tries to remove replicated volumes on the target. The job then removes itself from the configuration file.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--schedule</span> <span class="monospaced">&lt;string&gt;</span> (<em>default =</em> <span class="monospaced">*/15</span>)
</dt>
<dd>
<p>
Storage replication schedule. The format is a subset of <span class="monospaced">systemd</span> calender events.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Source of the replication.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr delete</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Mark replication job for removal.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;boolean&gt;</span> (<em>default =</em> <span class="monospaced">0</span>)
</dt>
<dd>
<p>
Will remove the jobconfig entry, but will not cleanup.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep</span> <span class="monospaced">&lt;boolean&gt;</span> (<em>default =</em> <span class="monospaced">0</span>)
</dt>
<dd>
<p>
Keep replicated data at target (do not remove).
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr disable</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>Disable a replication job.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr enable</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>Enable a replication job.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr finalize-local-job</strong> <span class="monospaced">&lt;id&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Finalize a replication job. This removes all replications snapshots with
timestamps different than &lt;last_sync&gt;.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;</span>: <span class="monospaced">&lt;array&gt;</span> 
</dt>
<dd>
<p>
The list of volume IDs to consider.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span> 
</dt>
<dd>
<p>
Time (UNIX epoch) of last successful sync. If not specified, all replication snapshots gets removed.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr help</strong> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Get help about specified command.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt;</span> 
</dt>
<dd>
<p>
Shows help for a specific command
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span> 
</dt>
<dd>
<p>
Verbose output format.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr list</strong></p></div>
<div class="paragraph">
<p>List replication jobs.</p></div>
<div class="paragraph">
<p><strong>pvesr prepare-local-job</strong> <span class="monospaced">&lt;id&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Prepare for starting a replication job. This is called on the target node
before replication starts. This call is for internal use, and return a JSON
object on stdout. The method first test if VM &lt;vmid&gt; reside on the local
node. If so, stop immediately. After that the method scans all volume IDs
for snapshots, and removes all replications snapshots with timestamps
different than &lt;last_sync&gt;. It also removes any unused volumes. Returns a
hash with boolean markers for all volumes with existing replication
snapshots.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;</span>: <span class="monospaced">&lt;array&gt;</span> 
</dt>
<dd>
<p>
The list of volume IDs to consider.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;boolean&gt;</span> (<em>default =</em> <span class="monospaced">0</span>)
</dt>
<dd>
<p>
Allow to remove all existion volumes (empty volume list).
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span> 
</dt>
<dd>
<p>
Time (UNIX epoch) of last successful sync. If not specified, all replication snapshots get removed.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parent_snapname</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
The name of the snapshot.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scan</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
List of storage IDs to scan for stale volumes.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr read</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>Read replication job configuration.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr run</strong> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>This method is called by the systemd-timer and executes all (or a specific)
sync jobs.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mail</span> <span class="monospaced">&lt;boolean&gt;</span> (<em>default =</em> <span class="monospaced">0</span>)
</dt>
<dd>
<p>
Send an email notification in case of a failure.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span> (<em>default =</em> <span class="monospaced">0</span>)
</dt>
<dd>
<p>
Print more verbose logs to stdout.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr schedule-now</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>Schedule replication job to start as soon as possible.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr set-state</strong> <span class="monospaced">&lt;vmid&gt; &lt;state&gt;</span></p></div>
<div class="paragraph">
<p>Set the job replication state on migration. This call is for internal use.
It will accept the job state as ja JSON obj.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;</span>: <span class="monospaced">&lt;integer&gt; (1 - N)</span> 
</dt>
<dd>
<p>
The (unique) ID of the VM.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;state&gt;</span>: <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Job state as JSON decoded string.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr status</strong> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>List status of all replication jobs on this node.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--guest</span> <span class="monospaced">&lt;integer&gt; (1 - N)</span> 
</dt>
<dd>
<p>
Only list replication jobs for this guest.
</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr update</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Update replication job configuration.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;</span>: <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span> 
</dt>
<dd>
<p>
Replication Job ID. The ID is composed of a Guest ID and a job number, separated by a hyphen, i.e. <em>&lt;GUEST&gt;-&lt;JOBNUM&gt;</em>.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Description.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
A list of settings you want to delete.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Prevent changes if current configuration file has different SHA1 digest. This can be used to prevent concurrent modifications.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&lt;boolean&gt;</span> 
</dt>
<dd>
<p>
Flag to disable/deactivate the entry.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rate</span> <span class="monospaced">&lt;number&gt; (1 - N)</span> 
</dt>
<dd>
<p>
Rate limit in mbps (megabytes per second) as floating point number.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&lt;full | local&gt;</span> 
</dt>
<dd>
<p>
Mark the replication job for removal. The job will remove all local replication snapshots. When set to <em>full</em>, it also tries to remove replicated volumes on the target. The job then removes itself from the configuration file.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--schedule</span> <span class="monospaced">&lt;string&gt;</span> (<em>default =</em> <span class="monospaced">*/15</span>)
</dt>
<dd>
<p>
Storage replication schedule. The format is a subset of <span class="monospaced">systemd</span> calender events.
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&lt;string&gt;</span> 
</dt>
<dd>
<p>
Source of the replication.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <span class="monospaced">pvesr</span> command line tool manages the Proxmox VE storage replication
framework. Storage replication brings redundancy for guests using
local storage and reduces migration time.</p></div>
<div class="paragraph">
<p>It replicates guest volumes to another node so that all data is available
without using shared storage. Replication uses snapshots to minimize traffic
sent over the network. Therefore, new data is sent only incrementally after
an initial full sync. In the case of a node failure, your guest data is
still available on the replicated node.</p></div>
<div class="paragraph">
<p>The replication will be done automatically in configurable intervals.
The minimum replication interval is one minute and the maximal interval is
once a week. The format used to specify those intervals is a subset of
<span class="monospaced">systemd</span> calendar events, see
<a href="pvesr.1.html#pvesr_schedule_time_format">Schedule Format</a> section:</p></div>
<div class="paragraph">
<p>Every guest can be replicated to multiple target nodes, but a guest cannot
get replicated twice to the same target node.</p></div>
<div class="paragraph">
<p>Each replications bandwidth can be limited, to avoid overloading a storage
or server.</p></div>
<div class="paragraph">
<p>Virtual guest with active replication cannot currently use online migration.
Offline migration is supported in general. If you migrate to a node where
the guests data is already replicated only the changes since the last
synchronisation (so called <span class="monospaced">delta</span>) must be sent, this reduces the required
time significantly. In this case the replication direction will also switch
nodes automatically after the migration finished.</p></div>
<div class="paragraph">
<p>For example: VM100 is currently on <span class="monospaced">nodeA</span> and gets replicated to <span class="monospaced">nodeB</span>.
You migrate it to <span class="monospaced">nodeB</span>, so now it gets automatically replicated back from
<span class="monospaced">nodeB</span> to <span class="monospaced">nodeA</span>.</p></div>
<div class="paragraph">
<p>If you migrate to a node where the guest is not replicated, the whole disk
data must send over. After the migration the replication job continues to
replicate this guest to the configured nodes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="paragraph">
<p>High-Availability is allowed in combination with storage replication, but it
has the following implications:</p></div>
<div class="ulist"><ul>
<li>
<p>
redistributing services after a more preferred node comes online will lead
  to errors.
</p>
</li>
<li>
<p>
recovery works, but there may be some data loss between the last synced
  time and the time a node failed.
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_storage_types">Supported Storage Types</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<caption class="title">Table 1. Storage Types</caption>
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Description    </th>
<th class="tableblock halign-left valign-top" >PVE type    </th>
<th class="tableblock halign-left valign-top" >Snapshots</th>
<th class="tableblock halign-left valign-top" >Stable</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">ZFS (local)</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">zfspool</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="pvesr_schedule_time_format">Schedule Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VE has a very flexible replication scheduler. It is based on the systemd
time calendar event format.<span class="footnote"><br>[see <span class="monospaced">man 7 systemd.time</span> for more information]<br></span>
Calendar events may be used to refer to one or more points in time in a
single expression.</p></div>
<div class="paragraph">
<p>Such a calendar event uses the following format:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[day(s)] [[start-time(s)][/repetition-time(s)]]</pre>
</div></div>
<div class="paragraph">
<p>This allows you to configure a set of days on which the job should run.
You can also set one or more start times, it tells the replication scheduler
the moments in time when a job should start.
With this information we could create a job which runs every workday at 10
PM: <span class="monospaced">'mon,tue,wed,thu,fri 22'</span> which could be abbreviated to: <span class="monospaced">'mon..fri
22'</span>, most reasonable schedules can be written quite intuitive this way.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Hours are set in 24h format.</td>
</tr></table>
</div>
<div class="paragraph">
<p>To allow easier and shorter configuration one or more repetition times can
be set. They indicate that on the start-time(s) itself and the start-time(s)
plus all multiples of the repetition value replications will be done.  If
you want to start replication at 8 AM and repeat it every 15 minutes until
9 AM you would use: <span class="monospaced">'8:00/15'</span></p></div>
<div class="paragraph">
<p>Here you see also that if no hour separation (<span class="monospaced">:</span>) is used the value gets
interpreted as minute. If such a separation is used the value on the left
denotes the hour(s) and the value on the right denotes the minute(s).
Further, you can use <span class="monospaced">*</span> to match all possible values.</p></div>
<div class="paragraph">
<p>To get additional ideas look at
<a href="pvesr.1.html#pvesr_schedule_format_examples">more Examples below</a>.</p></div>
<div class="sect2">
<h3 id="_detailed_specification">Detailed Specification</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
days
</dt>
<dd>
<p>
Days are specified with an abbreviated English version: <span class="monospaced">sun, mon,
tue, wed, thu, fri and sat</span>. You may use multiple days as a comma-separated
list. A range of days can also be set by specifying the start and end day
separated by &#8220;..&#8221;, for example <span class="monospaced">mon..fri</span>. Those formats can be also
mixed. If omitted <span class="monospaced">'*'</span> is assumed.
</p>
</dd>
<dt class="hdlist1">
time-format
</dt>
<dd>
<p>
A time format consists of hours and minutes interval lists.
Hours and minutes are separated by <span class="monospaced">':'</span>. Both, hour and minute, can be list
and ranges of values, using the same format as days.
First come hours then minutes, hours can be omitted if not needed, in this
case <span class="monospaced">'*'</span> is assumed for the value of hours.
The valid range for values is <span class="monospaced">0-23</span> for hours and <span class="monospaced">0-59</span> for minutes.
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="pvesr_schedule_format_examples">Examples:</h3>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<caption class="title">Table 2. Schedule Examples</caption>
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Schedule String        </th>
<th class="tableblock halign-left valign-top" >Alternative            </th>
<th class="tableblock halign-left valign-top" >Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon,tue,wed,thu,fri</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon..fri</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every working day at 0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">sat,sun</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">sat..sun</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Only on weekends at 0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon,wed,fri</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Only on Monday, Wednesday and Friday at 0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every day at 12:05 PM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">*/5</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">0/5</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every five minutes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon..wed 30/10</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon,tue,wed 30/10</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Monday, Tuesday, Wednesday 30, 40 and 50 minutes after every full hour</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">mon..fri 8..17,22:0/15</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every working day every 15 minutes between 8 AM and 6 PM and between 10 PM and 11 PM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">fri 12..13:5/20</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">fri 12,13:5/20</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Friday at 12:05, 12:25, 12:45, 13:05, 13:25 and 13:45</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">12,14,16,18,20,22:5</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">12/2:5</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every day starting at 12:05 until 22:05, every 2 hours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">*/1</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Every minute (minimum interval)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_error_handling">Error Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a replication job encounters problems it will be placed in error state.
In this state the configured replication intervals get suspended
temporarily. Then we retry the failed replication in a 30 minute interval,
once this succeeds the original schedule gets activated again.</p></div>
<div class="sect2">
<h3 id="_possible_issues">Possible issues</h3>
<div class="paragraph">
<p>This represents only the most common issues possible, depending on your
setup there may be also another cause.</p></div>
<div class="ulist"><ul>
<li>
<p>
Network is not working.
</p>
</li>
<li>
<p>
No free space left on the replication target storage.
</p>
</li>
<li>
<p>
Storage with same storage ID available on target node
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">You can always use the replication log to get hints about a problems
cause.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_migrating_a_guest_in_case_of_error">Migrating a guest in case of Error</h3>
<div class="paragraph">
<p>In the case of a grave error a virtual guest may get stuck on a failed
node. You then need to move it manually to a working node again.</p></div>
</div>
<div class="sect2">
<h3 id="_example">Example</h3>
<div class="paragraph">
<p>Lets assume that you have two guests (VM 100 and CT 200) running on node A
and replicate to node B.
Node A failed and can not get back online. Now you have to migrate the guest
to Node B manually.</p></div>
<div class="ulist"><ul>
<li>
<p>
connect to node B over ssh or open its shell via the WebUI
</p>
</li>
<li>
<p>
check if that the cluster is quorate
</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm status</pre>
</div></div>
</li>
<li>
<p>
If you have no quorum we strongly advise to fix this first and make the
  node operable again. Only if this is not possible at the moment you may
  use the following command to enforce quorum on the current node:
</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm expected 1</pre>
</div></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">If expected votes are set avoid changes which affect the cluster
(for example adding/removing nodes, storages, virtual guests)  at all costs.
Only use it to get vital guests up and running again or to resolve to quorum
issue itself.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
move both guest configuration files form the origin node A to node B:
</p>
<div class="listingblock">
<div class="content monospaced">
<pre># mv /etc/pve/nodes/A/qemu-server/100.conf /etc/pve/nodes/B/qemu-server/100.conf
# mv /etc/pve/nodes/A/lxc/200.conf /etc/pve/nodes/B/lxc/200.conf</pre>
</div></div>
</li>
<li>
<p>
Now you can start the guests again:
</p>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 100
# pct start 200</pre>
</div></div>
</li>
</ul></div>
<div class="paragraph">
<p>Remember to replace the VMIDs and node names with your respective values.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_jobs">Managing Jobs</h2>
<div class="sectionbody">
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-add-replication-job.png">
<img src="images/screenshot/gui-qemu-add-replication-job.png" alt="gui-qemu-add-replication-job.png" width=250
 style="padding: 0 0 0 10px;float:right;"
></a>
<p>You can use the web GUI to create, modify and remove replication jobs
easily. Additionally the command line interface (CLI) tool <span class="monospaced">pvesr</span> can be
used to do this.</p></div>
<div class="paragraph">
<p>You can find the replication panel on all levels (datacenter, node, virtual
guest) in the web GUI. They differ in what jobs get shown: all, only node
specific or only guest specific jobs.</p></div>
<div class="paragraph">
<p>Once adding a new job you need to specify the virtual guest (if not already
selected) and the target node. The replication
<a href="pvesr.1.html#pvesr_schedule_time_format">schedule</a> can be set if the default of <span class="monospaced">all
15 minutes</span> is not desired. You may also impose rate limiting on a
replication job, this can help to keep the storage load acceptable.</p></div>
<div class="paragraph">
<p>A replication job is identified by an cluster-wide unique ID. This ID is
composed of the VMID in addition to an job number.
This ID must only be specified manually if the CLI tool is used.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_interface_examples">Command Line Interface Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a replication job which will run every 5 minutes with limited bandwidth of
10 mbps (megabytes per second) for the guest with guest ID 100.</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr create-local-job 100-0 pve1 --schedule "*/5" --rate 10</pre>
</div></div>
<div class="paragraph">
<p>Disable an active job with ID <span class="monospaced">100-0</span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr disable 100-0</pre>
</div></div>
<div class="paragraph">
<p>Enable a deactivated job with ID <span class="monospaced">100-0</span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr enable 100-0</pre>
</div></div>
<div class="paragraph">
<p>Change the schedule interval of the job with ID <span class="monospaced">100-0</span> to once a hour</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr update 100-0 --schedule '*/00'</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright_and_disclaimer">Copyright and Disclaimer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2007-2017 Proxmox Server Solutions GmbH</p></div>
<div class="paragraph">
<p>This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.</p></div>
<div class="paragraph">
<p>This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Affero General Public License for more details.</p></div>
<div class="paragraph">
<p>You should have received a copy of the GNU Affero General Public
License along with this program.  If not, see
<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a></p></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Version 5.2<br>
Last updated
 Wed Aug  8 08:51:56 CEST 2018
</div>
</div>
</body>
</html>
